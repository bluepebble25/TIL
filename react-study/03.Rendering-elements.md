# 엘리먼트 렌더링
## 1. React 엘리먼트
브라우저 DOM 엘리먼트와 달리 **React 엘리먼트는 일반 객체(plain object)** 이며 쉽게 생성할 수 있다. React DOM은 React 엘리먼트와 일치하도록 DOM을 업데이트한다.  
*React 엘리먼트는 DOM이 아니라 일반 객체라고? React DOM과 React 엘리먼트가 일치하도록 업데이트한다는데, 이게 다 무슨 말이지?*

-> 리액트는 유저 인터랙션이 발생할 때마다 JS가 DOM을 조작하느라 많은 리소스가 드는 문제를 해결하기 위해 가상 DOM(Virtual DOM)을 도입했다. 그리고 진짜 DOM과 가상 DOM 사이의 변경사항만을 업데이트해서 리소스 부담을 줄일 수 있었다. 이런 가상 DOM을 구현하기 위해 리액트에서는 엘리먼트를 JS의 Object { } 형식으로 저장한다.

```javascript
{
  type: 'button',
  props: {
    className: 'btn__blue',
    children: {
      type: 'span',
      props: {
        children: 'Say Hello!'
      }
    }
  }
}

// type에는 추가할 엘리먼트 요소의 이름
// props(property)에는 class, attribute, 자식요소 작성
// 이런 Object 형태의 엘리먼트는 더 커다란 엘리먼트 혹은 Virtual DOM tree의 아래에 속할 수 있다.
```


엘리먼트를 JSX나 React.createElement()로 작성한 내용을 내부에서 이렇게 Object 형태로 변환해주고, 이것이 엘리먼트와 마찬가지로 Object로 이루어진 Virtual DOM에 반영되는 것이다. Virtual DOM은 Object로 이루어져있기 때문에 실제 DOM보다 훨씬 가볍다. React.render()함수를 실행하면 Virtual DOM tree (레시피)를 보고 화면에 렌더링하는 것이다.

Virtual DOM tree에 변경사항이 발생한다면 diff 알고리즘을 이용해 변경된 부분만을 찾아 업데이트하므로 React.render()를 계속 호출해도 변경된 엘리먼트 부분만 찾아 다시 그린다.


#### Reference
[공식 React - blog](https://reactjs.org/blog/2015/12/18/react-components-elements-and-instances.html#dom-elements)

<br>

## 2. 렌더링(Rendering)
### ReactDOM.render()
```html
<div id="root"></div>
```

```javascript
const element = <h1>Hello, world</h1>;
ReactDOM.render(element, document.getElementById('root'));
```

ReactDOM.render(element, container[, callback])

이 함수를 실행하면 화면을 그릴 곳(container)인 root 노드의 아래에 엘리먼트를 렌더링해준다. 첫번째 파라미터에는 엘리먼트뿐만 아니라 컴포넌트도 들어갈 수 있다.

### React의 엘리먼트는 불변객체
React의 엘리먼트는 불변객체(변경할 수 없음)이므로 수정이 필요하다면 새로 만들어야 한다. 수정하려면 기존의 엘리먼트를 변경하는게 아니라 변경할 새 엘리먼트를 ReactDOM.render() 함수에 넣어 다시 화면을 그려야 한다. 그렇다고 모든 화면을 새로 그리는것이 아니다. 기존의 Virtual DOM과 비교해서 변경된 엘리먼트만을 감지해 그 부분만 다시 그린다.

### 변경된 부분만 업데이트하기
```javascript
function tick() {
  const element = (
    <div>
      <h1>Hello, world!</h1>
      <h2>It is {new Date().toLocaleTimeString()}.</h2>
    </div>
  );
  ReactDOM.render(element, document.getElementById('root'));
}

setInterval(tick, 1000);
```

setInterval()로 1초마다 tick()을 실행해서 그때마다 ReactDOM.render()가 실행되고 있다. 이때 전체를 다시 그리는게 아니라 DOM과 현재의 가상 DOM 사이의 다른 점인 ```<h2>It is {new Date().toLocaleTimeString()}.</h2>``` 부분만 다시 그린다. 개발자 도구(F12)로 엘리먼트를 살펴보면 시간 부분만 변경되느라 깜박거린다.

<br>

### + React 18 version ?
React 18 버전에서는 ReactDOM.render()로 렌더링하면 Warning을 표시한다. 현재 안정된 배포 버전에서는 반영되지 않았지만 곧 render()를 바로 하는 것이 아니라 ReactDOM.createRoot()로 root를 만든 다음 render()해야 할 것으로 보인다. 그 문법이 눈에 익으라고 여기 써놓는다.

ReactDOM을 "react-dom"에서 불러오는게 아니라 "react-dom/client"에서 불러와야 한다.
```javascript
import React from "react";
import ReactDOM from "react-dom/client";
// !! 주의 !! react-dom이 아니라 react-dom/client다.

ReactDOM.createRoot(document.getElementById("root")).render();

// 혹은
const root = ReactDOM.createRoot(document.getElementById("root"));

root.render(
  <div>
    <h1>Hello, world!</h1>
  </div>
);
```
